{% extends "base.html" %}

{% block title %}Edit Employee{% endblock %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-md-10">
        <div class="form-container" style="margin-top: 2vh;">
            
            <form method="POST" action="{{ url_for('hr.edit_staff_member', id=employee.id) }}" enctype="multipart/form-data">
                {{ form.hidden_tag() }}

                <div class="row">
                    <div class="col-md-3 text-center">
                        <img src="{{ employee.photo_url }}" class="img-thumbnail rounded-circle mb-3" alt="Profile Photo" style="width: 150px; height: 150px; object-fit: cover;">
                        <label for="photo" class="form-label">Update Photo</label>
                        {{ form.photo(class="form-control form-control-sm") }}
                    </div>

                    <div class="col-md-9">
                        <h2 class="card-title mb-1">Edit Employee Record</h2>
                        <p class="text-muted mb-4">{{ employee.first_name }} {{ employee.last_name }}</p>

                        <h4 class="mt-3 border-bottom pb-2">Personal & Employment Details</h4>
                        <div class="row">
                            <div class="col-md-4 mb-3">
                                <label for="employee_id_number" class="form-label">Employee ID</label>
                                {{ form.employee_id_number(class="form-control") }}
                            </div>
                            <div class="col-md-4 mb-3">
                                <label for="first_name" class="form-label">First Name</label>
                                {{ form.first_name(class="form-control") }}
                            </div>
                            <div class="col-md-4 mb-3">
                                <label for="last_name" class="form-label">Last Name</label>
                                {{ form.last_name(class="form-control") }}
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="position" class="form-label">Position/Job Title</label>
                                {{ form.position(class="form-control") }}
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="date_hired" class="form-label">Date Hired</label>
                                {{ form.date_hired(class="form-control", type="date") }}
                            </div>
                        </div>
                    </div>
                </div>

                <h4 class="mt-3 border-bottom pb-2">Compensation & Status</h4>
                <div class="row">
                    <div class="col-md-6 mb-3">
                        <label for="salary_rate" class="form-label">Basic Salary Rate (Monthly)</label>
                        {{ form.salary_rate(class="form-control") }}
                    </div>
                    <div class="col-md-6 mb-3">
                        <label for="status" class="form-label">Employment Status</label>
                        {{ form.status(class="form-select") }}
                    </div>
                </div>

                <h4 class="mt-3 border-bottom pb-2">Compliance (Statutory)</h4>
                <div class="row">
                    <div class="col-md-3 mb-3">
                        <label for="tin" class="form-label">TIN</label>
                        {{ form.tin(class="form-control") }}
                    </div>
                    <div class="col-md-3 mb-3">
                        <label for="sss_num" class="form-label">SSS No.</label>
                        {{ form.sss_num(class="form-control") }}
                    </div>
                    <div class="col-md-3 mb-3">
                        <label for="philhealth_num" class="form-label">PhilHealth No.</label>
                        {{ form.philhealth_num(class="form-control") }}
                    </div>
                    <div class="col-md-3 mb-3">
                        <label for="pagibig_num" class="form-label">Pag-IBIG No.</label>
                        {{ form.pagibig_num(class="form-control") }}
                    </div>
                </div>

                <h4 class="mt-3 border-bottom pb-2">Payment Information</h4>
                <div class="row">
                    <div class="col-md-12 mb-3">
                        <label for="bank_account_num" class="form-label">Bank Account No.</label>
                        {{ form.bank_account_num(class="form-control") }}
                    </div>
                </div>

                <button type="submit" class="btn btn-success w-100 mt-4 py-3">Update Employee Record</button>
                <a href="{{ url_for('hr.manage_all_staff') }}" class="btn btn-outline-secondary w-100 mt-2">Cancel</a>
            </form>
        </div>
    </div>
</div>
{% endblock %}