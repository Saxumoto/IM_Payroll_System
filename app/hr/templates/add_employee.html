<!-- app/hr/templates/hr/add_employee.html -->
{% extends "base.html" %}

{% block title %}Add New Employee{% endblock %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-md-10">
        <div class="form-container" style="margin-top: 2vh;">
            <h2 class="card-title text-center mb-4">Add New Employee Record</h2>
            
            <!-- 
              THIS IS A CRITICAL CHANGE:
              We MUST add enctype for file uploads to work.
            -->
            <form method="POST" action="{{ url_for('hr.add_employee') }}" enctype="multipart/form-data">
                {{ form.hidden_tag() }}

                <h4 class="mt-3 border-bottom pb-2">Login & Photo</h4>
                <div class="row">
                    <div class="col-md-4 mb-3">
                        <label for="email" class="form-label">Login Email (Username)</label>
                        {{ form.email(class="form-control", placeholder="you@example.com") }}
                    </div>
                    <div class="col-md-4 mb-3">
                        <label for="password" class="form-label">Initial Password</label>
                        {{ form.password(class="form-control", placeholder="Min 6 characters") }}
                    </div>
                    <div class="col-md-4 mb-3">
                        <!-- NEW PHOTO FIELD -->
                        <label for="photo" class="form-label">Employee Photo</label>
                        {{ form.photo(class="form-control") }}
                    </div>
                </div>

                <h4 class="mt-3 border-bottom pb-2">Personal & Employment Details</h4>
                <div class="row">
                    <div class="col-md-4 mb-3">
                        <label for="employee_id_number" class="form-label">Employee ID</label>
                        {{ form.employee_id_number(class="form-control", placeholder="DVO-001") }}
                    </div>
                    <div class="col-md-4 mb-3">
                        <label for="first_name" class="form-label">First Name</label>
                        {{ form.first_name(class="form-control") }}
                    </div>
                    <div class="col-md-4 mb-3">
                        <label for="last_name" class="form-label">Last Name</label>
                        {{ form.last_name(class="form-control") }}
                    </div>
                    <!-- ... (rest of form is the same) ... -->
                    <div class="col-md-6 mb-3">
                        <label for="position" class="form-label">Position/Job Title</label>
                        {{ form.position(class="form-control", placeholder="Account Manager") }}
                    </div>
                    <div class="col-md-6 mb-3">
                        <label for="date_hired" class="form-label">Date Hired</label>
                        {{ form.date_hired(class="form-control", type="date") }}
                    </div>
                </div>

                <h4 class="mt-3 border-bottom pb-2">Compensation & Status</h4>
                <div class="row">
                    <div class="col-md-6 mb-3">
                        <label for="salary_rate" class="form-label">Basic Salary Rate (Monthly)</label>
                        {{ form.salary_rate(class="form-control", placeholder="30000.00") }}
                    </div>
                    <div class="col-md-6 mb-3">
                        <label for="status" class="form-label">Employment Status</label>
                        {{ form.status(class="form-select") }}
                    </div>
                </div>

                <h4 class="mt-3 border-bottom pb-2">Compliance (Statutory)</h4>
                <div class="row">
                    <div class="col-md-3 mb-3">
                        <label for="tin" class="form-label">TIN</label>
                        {{ form.tin(class="form-control") }}
                    </div>
                    <div class="col-md-3 mb-3">
                        <label for="sss_num" class="form-label">SSS No.</label>
                        {{ form.sss_num(class="form-control") }}
                    </div>
                    <div class="col-md-3 mb-3">
                        <label for="philhealth_num" class="form-label">PhilHealth No.</label>
                        {{ form.philhealth_num(class="form-control") }}
                    </div>
                    <div class="col-md-3 mb-3">
                        <label for="pagibig_num" class="form-label">Pag-IBIG No.</label>
                        {{ form.pagibig_num(class="form-control") }}
                    </div>
                </div>

                <h4 class="mt-3 border-bottom pb-2">Payment Information</h4>
                <div class="row">
                    <div class="col-md-12 mb-3">
                        <label for="bank_account_num" class="form-label">Bank Account No.</label>
                        {{ form.bank_account_num(class="form-control") }}
                    </div>
                </div>

                <button type="submit" class="btn btn-primary w-100 mt-4 py-3">Add Employee Record</button>
            </form>
        </div>
    </div>
</div>
{% endblock %}